apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: multichain-orderer1
  namespace: multichain-net
  annotations:
    fluxcd.io/automated: "false"
spec:
  interval: 1m
  releaseName: multichain-orderer1
  chart:
    spec:
      interval: 1m
      sourceRef:
        kind: GitRepository
        name: flux-local
        namespace: flux-local
      chart: platforms/hyperledger-fabric/charts/orderernode
  values:
    metadata:
      namespace: multichain-net
      images:
        orderer: hyperledger/fabric-orderer:1.4.8
        alpineutils: index.docker.io/hyperledgerlabs/alpine-utils:1.0
    orderer:
      name: orderer1
      loglevel: info
      localmspid: multichainMSP
      tlsstatus: true
      keepaliveserverinterval: 10s
    
    consensus:
      name: raft

    storage:
      storageclassname: multichainsc
      storagesize: 512Mi  

    service:
      servicetype: ClusterIP
      ports:
        grpc:
          clusteripport: 7050

    vault:
      address: http://20.244.7.50:8200
      role: vault-role
      authpath: localmultichain-net-auth
      secretprefix: secretsv2/data/crypto/ordererOrganizations/multichain-net/orderers/orderer1.multichain-net
      imagesecretname: regcred
      serviceaccountname: vault-auth

    proxy:
      provider: none
      external_url_suffix: upgrade.upgrade.com

    genesis: |-
      CokSCugIChYIAhoGCKWQsKEGIgpzeXNjaGFubmVsEs0ICrAICg1tdWx0aWNoYWluTVNQEp4ILS0t
      LS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMzakNDQW9XZ0F3SUJBZ0lVQWdLWithZkc2SFo1
      bk94SS9vZzNUdjI0WENjd0NnWUlLb1pJemowRUF3SXcKWFRFTE1Ba0dBMVVFQmhNQ1IwSXhEekFO
      QmdOVkJBZ01Ca3h2Ym1SdmJqRVBNQTBHQTFVRUJ3d0dURzl1Wkc5dQpNUkF3RGdZRFZRUUtEQWRQ
      Y21SbGNtVnlNUm93R0FZRFZRUUREQkZqWVM1dGRXeDBhV05vWVdsdUxXNWxkREFlCkZ3MHlNekEw
      TURReE1URTBNREJhRncweU5EQTBNRE14TVRFNU1EQmFNR3N4Q3pBSkJnTlZCQVlUQWtkQ01Sc3cK
      R1FZRFZRUUhFeEkxTVM0MU1DOHRNQzR4TXk5TWIyNWtiMjR4RURBT0JnTlZCQW9UQjA5eVpHVnla
      WEl4RGpBTQpCZ05WQkFzVEJXRmtiV2x1TVIwd0d3WURWUVFEREJSQlpHMXBia0J0ZFd4MGFXTm9Z
      V2x1TFc1bGREQlpNQk1HCkJ5cUdTTTQ5QWdFR0NDcUdTTTQ5QXdFSEEwSUFCQnpsV2FDVnoxL2cr
      OGVhc3QvNEFJTDZLL1JyMmtLVi94MUEKaHhlU20vWVU5RU1ncm1NeVBPRkpDN3dIQmttMkdQK0ZG
      VXZPcjJDaEM2Zm1Pd0xiNUI2amdnRVRNSUlCRHpBTwpCZ05WSFE4QkFmOEVCQU1DQjRBd0RBWURW
      UjBUQVFIL0JBSXdBREFkQmdOVkhRNEVGZ1FVbHo4dXRPeGFlS3dXCkNJcGFCdEptelZtQ1pLVXdI
      d1lEVlIwakJCZ3dGb0FVWGtQQlc1Slh2SldKVitLRFdpYkFjUkJtS0Vnd0pBWUQKVlIwUkJCMHdH
      NElaWTJFdGRHOXZiSE10Tm1NME5EbG1PVGcwWmkwM05IbzBPVENCaUFZSUtnTUVCUVlIQ0FFRQpm
      SHNpWVhSMGNuTWlPbnNpWVdKaFl5NXBibWwwSWpvaWRISjFaU0lzSW1Ga2JXbHVJam9pZEhKMVpT
      SXNJbWhtCkxrRm1abWxzYVdGMGFXOXVJam9pSWl3aWFHWXVSVzV5YjJ4c2JXVnVkRWxFSWpvaVFX
      UnRhVzVBYlhWc2RHbGoKYUdGcGJpMXVaWFFpTENKb1ppNVVlWEJsSWpvaVlXUnRhVzRpZlgwd0Nn
      WUlLb1pJemowRUF3SURSd0F3UkFJZwpadG9DeVVQU0NUNWxtUjVTN01ISFZSTVJBaFRnbXJtQWIz
      WnlFY09OWlJFQ0lFMHU1a011aE13MHA1L3EyakVXClpuSDl5a1pGa3ZVVzFHSlRwZ2dCYXdXZAot
      LS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tChIYNBipgDc8Oszw4QPAvyUj50HWP65BxIsUEpsJEpgJ
      Cs0ICrAICg1tdWx0aWNoYWluTVNQEp4ILS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMz
      akNDQW9XZ0F3SUJBZ0lVQWdLWithZkc2SFo1bk94SS9vZzNUdjI0WENjd0NnWUlLb1pJemowRUF3
      SXcKWFRFTE1Ba0dBMVVFQmhNQ1IwSXhEekFOQmdOVkJBZ01Ca3h2Ym1SdmJqRVBNQTBHQTFVRUJ3
      d0dURzl1Wkc5dQpNUkF3RGdZRFZRUUtEQWRQY21SbGNtVnlNUm93R0FZRFZRUUREQkZqWVM1dGRX
      eDBhV05vWVdsdUxXNWxkREFlCkZ3MHlNekEwTURReE1URTBNREJhRncweU5EQTBNRE14TVRFNU1E
      QmFNR3N4Q3pBSkJnTlZCQVlUQWtkQ01Sc3cKR1FZRFZRUUhFeEkxTVM0MU1DOHRNQzR4TXk5TWIy
      NWtiMjR4RURBT0JnTlZCQW9UQjA5eVpHVnlaWEl4RGpBTQpCZ05WQkFzVEJXRmtiV2x1TVIwd0d3
      WURWUVFEREJSQlpHMXBia0J0ZFd4MGFXTm9ZV2x1TFc1bGREQlpNQk1HCkJ5cUdTTTQ5QWdFR0ND
      cUdTTTQ5QXdFSEEwSUFCQnpsV2FDVnoxL2crOGVhc3QvNEFJTDZLL1JyMmtLVi94MUEKaHhlU20v
      WVU5RU1ncm1NeVBPRkpDN3dIQmttMkdQK0ZGVXZPcjJDaEM2Zm1Pd0xiNUI2amdnRVRNSUlCRHpB
      TwpCZ05WSFE4QkFmOEVCQU1DQjRBd0RBWURWUjBUQVFIL0JBSXdBREFkQmdOVkhRNEVGZ1FVbHo4
      dXRPeGFlS3dXCkNJcGFCdEptelZtQ1pLVXdId1lEVlIwakJCZ3dGb0FVWGtQQlc1Slh2SldKVitL
      RFdpYkFjUkJtS0Vnd0pBWUQKVlIwUkJCMHdHNElaWTJFdGRHOXZiSE10Tm1NME5EbG1PVGcwWmkw
      M05IbzBPVENCaUFZSUtnTUVCUVlIQ0FFRQpmSHNpWVhSMGNuTWlPbnNpWVdKaFl5NXBibWwwSWpv
      aWRISjFaU0lzSW1Ga2JXbHVJam9pZEhKMVpTSXNJbWhtCkxrRm1abWxzYVdGMGFXOXVJam9pSWl3
      aWFHWXVSVzV5YjJ4c2JXVnVkRWxFSWpvaVFXUnRhVzVBYlhWc2RHbGoKYUdGcGJpMXVaWFFpTENK
      b1ppNVVlWEJsSWpvaVlXUnRhVzRpZlgwd0NnWUlLb1pJemowRUF3SURSd0F3UkFJZwpadG9DeVVQ
      U0NUNWxtUjVTN01ISFZSTVJBaFRnbXJtQWIzWnlFY09OWlJFQ0lFMHU1a011aE13MHA1L3EyakVX
      ClpuSDl5a1pGa3ZVVzFHSlRwZ2dCYXdXZAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tChIY593F
      6+hmqmNx/F+hy/p9cBCzFhzdQCEBEkYwRAIgMVnOPGmlYOD5PrV9r6Xdgbgii6FHz2GmJ/t/lcPr
      iRwCIAhxDyiMXEuNEEqiHkWt7//dGOwdqLVIV27V5x3hq33eEkcwRQIhAMk+0nP869UGisSpg2h0
      sgdMHx2SOOt8arrN7QOlYeerAiAg3uzgdFrfEqBC41tXr6yzhqKAdHs1yyyl6l9Z+E+oHQ==

    config:
      pod:
        resources:
          limits:
            memory: 512M
            cpu: 1
          requests:
            memory: 512M
            cpu: 0.5
